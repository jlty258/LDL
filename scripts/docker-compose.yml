services:
  python-scripts:
    image: python:3.12-slim
    container_name: python-scripts
    hostname: python-scripts
    working_dir: /workspace/scripts
    environment:
      - TZ=Asia/Shanghai
      - PYTHONUNBUFFERED=1
    volumes:
      - .:/workspace/scripts
      - ../data_volume:/workspace/data_volume
      - python-packages:/usr/local/lib/python3.11/site-packages
    networks:
      - ldl-net
    command: >
      sh -c "
      pip install --quiet --upgrade pip &&
      pip install --quiet -r /workspace/scripts/requirements.txt &&
      echo 'Python环境已就绪，可以执行脚本了' &&
      tail -f /dev/null
      "
    restart: unless-stopped

volumes:
  python-packages:

networks:
  ldl-net:
    external: true
    name: ldl-net
